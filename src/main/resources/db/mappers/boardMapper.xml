<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE properties SYSTEM "http://java.sun.com/dtd/properties.dtd">
<properties>
	<!-- 글 목록 조회 -->
	<entry key="listBoard">
		 SELECT *
         FROM(
             SELECT ROWNUM RNUM, A.*
             FROM (
                     SELECT NO
                          , TITLE
                          , CONTENT
                          , HIT
                          , REGID
                          , TO_CHAR(REGDATE, 'YYYY-MM-DD') AS REGDATE
                     FROM TB_BOARD
                     WHERE DELYN = 'N'
                     ORDER BY NO DESC
             ) A
         )
         WHERE RNUM BETWEEN ? AND ?
	</entry>
	
	<!-- 게시글 개수 count -->
	<entry key="selectBoardCount">
		SELECT COUNT(*) AS COUNT
        FROM TB_BOARD
        WHERE DELYN = 'N'
	</entry>
	
	
	<!-- 글 등록 -->
	<entry key="insertBoard">
		INSERT INTO TB_BOARD
                    (
                           NO
                         , TITLE
                         , CONTENT
                         , HIT
                         , REGID
                         , MODID
                         , REGDATE
                         , MODDATE
                         , DELYN
                     )
                     VALUES
                     (
                            SEQ_BNO.NEXTVAL
                          , ?
                          , ?
                          , DEFAULT
                          , 'user' || SEQ_USERNO.NEXTVAL
                          , 'user' || SEQ_USERNO.CURRVAL
                          , SYSDATE
                          , SYSDATE
                          , 'N'
                     )
	</entry>
	
	<!-- 조회수 증가 -->
	<entry key="updateHit">
		UPDATE
				TB_BOARD
		SET HIT = HIT + 1
		WHERE NO = ?
			AND DELYN = 'N'
	</entry>
	
	<!-- 게시글 상세 조회 -->
	<entry key="detailBoard">
		SELECT 
				NO
			  , TITLE
			  , CONTENT
			  , HIT
			  , TO_CHAR(REGDATE, 'YYYY-MM-DD') AS REGDATE
			  , TO_CHAR(MODDATE, 'YYYY-MM-DD') AS MODDATE
		FROM TB_BOARD
		WHERE NO = ?
			AND DELYN = 'N'
	</entry>
	
	<!-- 게시글 상세 조회 -->
	<entry key="updateBoard">
		UPDATE
	           TB_BOARD
       SET TITLE = ?
         , CONTENT = ?
         , MODDATE = SYSDATE
       WHERE NO = ?
           AND DELYN = 'N'
	</entry>
	
	<!-- 게시글 삭제 -->
	<entry key="deleteBoard">
		UPDATE
               TB_BOARD
        SET DELYN = 'Y'
          , MODDATE = SYSDATE
        WHERE NO = ?
	</entry>
	
	<!-- 검색된 게시물 개수 count -->
	<entry key="selectSearchCount">
		SELECT COUNT(*) AS COUNT
        FROM TB_BOARD
        WHERE DELYN = 'N'
            AND TITLE LIKE '%' || ? || '%'
	</entry>
	
	<!-- 게시글 검색 -->
	<entry key="listSearchBoard">
		 SELECT *
         FROM(
             SELECT ROWNUM RNUM, A.*
             FROM (
                     SELECT NO
                          , TITLE
                          , CONTENT
                          , HIT
                          , REGID
                          , TO_CHAR(REGDATE, 'YYYY-MM-DD') AS REGDATE
                     FROM TB_BOARD
                     WHERE DELYN = 'N'
                         AND TITLE LIKE '%' || ? || '%'
                     ORDER BY NO DESC
             ) A
         )
         WHERE RNUM BETWEEN ? AND ?
	</entry>
	
	<!-- 댓글 조회 -->
	<entry key="listReply">
		SELECT RNO
		     , CONTENT
		     , REGID
		     , TO_CHAR(REGDATE, 'YYYY-MM-DD HH24:MI') AS REGDATE
		     , DELYN
		     , BNO
		FROM TB_REPLY
		WHERE DELYN = 'N'
			AND BNO = ?
		ORDER BY RNO DESC
	</entry>
	
	<!-- 댓글 등록 -->
	<entry key="insertReply">
		INSERT INTO
		            TB_REPLY
		            (
		                RNO
		              , CONTENT
		              , REGID
		              , REGDATE
		              , DELYN
		              , BNO
		            )
		            VALUES
		            (
		                SEQ_RNO.NEXTVAL
		              , ?
		              , 'user' || SEQ_USERNO.NEXTVAL
		              , SYSDATE
		              , DEFAULT
		              , ?
		            )
	</entry>
</properties>